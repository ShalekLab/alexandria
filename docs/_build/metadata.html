

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>The Alexandria Metadata Convention &mdash; Alexandria  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Running on Alexandria" href="alexandria.html" />
    <link rel="prev" title="The Alexandria Project" href="introduction.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #344563" >
          

          
            <a href="index.html">
          

          
            
            <img src="_static/logo_small.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">The Alexandria Project</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">The Alexandria Metadata Convention</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#metadata-categories">Metadata categories</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ontology-valued-metadata">Ontology-valued metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="#numeric-valued-metadata">Numeric-valued metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="#boolean-valued-metadata">Boolean-valued metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="#controlled-list-metadata">Controlled-list metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="#free-text-valued-metadata">Free text-valued metadata</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#metadata-with-complex-dependencies">Metadata with complex dependencies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dependent-metadata">Dependent metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="#array-valued-metadata">Array valued metadata</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">dropseq_cumulus Workflow</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="alexandria.html">Running on Alexandria</a></li>
<li class="toctree-l1"><a class="reference internal" href="terra.html">Running on Terra</a></li>
<li class="toctree-l1"><a class="reference internal" href="dropseq_cumulus.html">Inputs/Outputs</a></li>
</ul>
<p class="caption"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="data_upload.html">Alternatives to uploading data</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Alexandria</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>The Alexandria Metadata Convention</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/metadata.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="the-alexandria-metadata-convention">
<h1>The Alexandria Metadata Convention<a class="headerlink" href="#the-alexandria-metadata-convention" title="Permalink to this headline">¶</a></h1>
<p>In order to upload data with metadata to Alexandria, your metadata must conform to the <a class="reference external" href="https://github.com/broadinstitute/scp-ingest-pipeline/blob/master/tests/data/AMC_v1.1.3.tsv">Alexandria Metadata Convention</a>. For upload through the alignment pipeline, this metadata should be included within your <a class="reference external" href="dropseq_cumulus.html#the-input-csv-file">input CSV file</a> which should include any metadata that can be applied to all cells in a single sample.</p>
<p>For direct upload from Single Cell Portal formatted file types, these metadata should be included in the metadata file, referred to in this description as the ‘cell-level metadata file’. In your cell-level metadata file, each attribute name in the metadata can be a column name. To enforce some structure to the database, several fields are required and others require specific formatting guidelines. Users are encouraged to include as much metadata as possible, including metadata attributes which are the same for all samples in the study (ex. sequencing technology) as they will be important to users comparing data between studies.</p>
<div class="section" id="metadata-categories">
<h2>Metadata categories<a class="headerlink" href="#metadata-categories" title="Permalink to this headline">¶</a></h2>
<p>The Alexandria Metadata Convention contains 4 categories of structured metadata as follows:</p>
<div class="section" id="ontology-valued-metadata">
<h3>Ontology-valued metadata<a class="headerlink" href="#ontology-valued-metadata" title="Permalink to this headline">¶</a></h3>
<p>Examples: disease, species, organ</p>
<p>To allow query at varying levels of specificities, the Alexandria Metadata Convention uses ontology-valued metadata whenever possible. These ontologies are tree-structured heirarchies curated by experts and maintained by EBI. For the purposes of the Alexandria Metadata Convention, please select the most specific value in the heirarchy as possible. For use of this metadata during query of the Alexandria database, a query result will include all child values of the query term. Single Cell Portal treats these values as group, or categorical variables.</p>
<p><strong>Navigating ontologies to manually annotate your metadata:</strong> The EBI OLS (ontology lookup service) provides an interface as well as an API to explore these ontologies which may be useful in preparing your metadata. The API is documented <a class="reference external" href="https://www.ebi.ac.uk/ols/docs/developer">here</a>, and the API endpoints for a given ontology are found in the <code class="docutils literal notranslate"><span class="pre">ontology</span></code> column in the AMC spreadsheet. The graphical interface can be accessed through the same URL with <code class="docutils literal notranslate"><span class="pre">api</span></code> substituted with <code class="docutils literal notranslate"><span class="pre">ols</span></code> (ex. <code class="docutils literal notranslate"><span class="pre">https://www.ebi.ac.uk/ols/ontologies/UBERON</span></code>). Because some ontologies include more areas than are covered by Alexandria, we have specified a <em>root</em> for some ontologies, specified in the <code class="docutils literal notranslate"><span class="pre">ontology_root</span></code> column of the AMC spreadsheet. Entries in Alexandria metadata should come from below that root in the ontology tree.  To visit the page described by the root use the URL: <code class="docutils literal notranslate"><span class="pre">https://www.ebi.ac.uk/ols/ontologies/&lt;ontology</span> <span class="pre">name&gt;/terms?iri=http%3A%2F%2Fpurl.obolibrary.org%2Fobo%2F&lt;alexandria</span> <span class="pre">ontology</span> <span class="pre">root&gt;</span></code>. For example, for the species attribute, from the <code class="docutils literal notranslate"><span class="pre">NCBITaxon</span></code> ontology with root <code class="docutils literal notranslate"><span class="pre">NCBITaxon_2759</span></code> can be accessed using the URL <code class="docutils literal notranslate"><span class="pre">https://www.ebi.ac.uk/ols/ontologies/ncbitaxon/terms?iri=http%3A%2F%2Fpurl.obolibrary.org%2Fobo%2FNCBITaxon_2759</span></code>.</p>
<p><strong>Formatting ontology-valued metadata in the metadata file:</strong> In the Alexandria Metadata Convention, two columns should be included for each ontology-valued metadata entry. The first, named <code class="docutils literal notranslate"><span class="pre">&lt;metadata</span> <span class="pre">attribute&gt;</span></code> contains the ontology ID in the structure <code class="docutils literal notranslate"><span class="pre">&lt;ontology</span> <span class="pre">name&gt;_&lt;numeric</span> <span class="pre">ID&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">&lt;ontology</span> <span class="pre">name&gt;:&lt;numeric</span> <span class="pre">ID&gt;</span></code>. The second column, <code class="docutils literal notranslate"><span class="pre">&lt;metadata</span> <span class="pre">attribute&gt;__ontology_label</span></code>, should contain the human-readable label for the ontology ID and should exactly match the name in the EBI database. This name is the title of the page on OLS. Ex. for attribute <code class="docutils literal notranslate"><span class="pre">species</span></code>, value: <code class="docutils literal notranslate"><span class="pre">NCBITaxon_9606</span></code> and <code class="docutils literal notranslate"><span class="pre">species__ontology_label</span></code>, value: <code class="docutils literal notranslate"><span class="pre">homo</span> <span class="pre">sapiens</span></code>. The label attribute is required for required metadata but may be left blank for optional metadata. It is recommended that users fill in this value to allow for more through validation of metadata files.</p>
</div>
<div class="section" id="numeric-valued-metadata">
<h3>Numeric-valued metadata<a class="headerlink" href="#numeric-valued-metadata" title="Permalink to this headline">¶</a></h3>
<p>Examples: organism_age, bmi</p>
<p>This metadata is read in by Single Cell Portal as numeric, so when it is visualized in a plot, it will be shown on a color scale instead of as a categorical variable.</p>
<p><strong>Each numeric metadata value in the convention requires a corresponding unit attribute. Each study should use the same unit for all values of that attribute.</strong></p>
<p>These unit attributes are named <code class="docutils literal notranslate"><span class="pre">&lt;metadata</span> <span class="pre">attribute&gt;__unit</span></code> and most come from an <em>ontology</em> whose contents can be found in the <strong>ontology</strong> column of the AMC spreadsheet. For units derived from an ontology, please include the corresponding <code class="docutils literal notranslate"><span class="pre">&lt;metadata</span> <span class="pre">attribute&gt;__unit_label</span></code> column in your metadata file as well. These columns contain the same information as the <code class="docutils literal notranslate"><span class="pre">&lt;attribute&gt;__ontology_label</span></code> columns (the human-readable metadata name which corresponds with the ontology ID).</p>
<p>Some unit metadata are not ontologies because no ontology currently exists to describe these units. In these cases, please enter a clear description of the units (ex. mg/mL).</p>
<p>While all values of a given unit attribute must be the same in a single study, please include the unit attribute for all rows with a value for its corresponding numeric metadata.</p>
</div>
<div class="section" id="boolean-valued-metadata">
<h3>Boolean-valued metadata<a class="headerlink" href="#boolean-valued-metadata" title="Permalink to this headline">¶</a></h3>
<p>ex. treated</p>
<p>Boolean valued metadata may take the values <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code> and is read by Single Cell Portal as group (categorical) metadata.</p>
</div>
<div class="section" id="controlled-list-metadata">
<h3>Controlled-list metadata<a class="headerlink" href="#controlled-list-metadata" title="Permalink to this headline">¶</a></h3>
<p>ex. sample_type</p>
<p>Some metadata attributes do not fit into existing ontologies but can be described using a limited set of categories. For this metadata, the Alexandria team has selected a controlled list of values. These metadata have type <code class="docutils literal notranslate"><span class="pre">enum</span></code> in the AMC spreadsheet and their possible values can be found in the <code class="docutils literal notranslate"><span class="pre">controlled_list_entries</span></code> column.</p>
<p><strong>Procedure for changing controlled lists:</strong> Requests for values to be added to controlled lists should be sent to the Shalek Lab.</p>
</div>
<div class="section" id="free-text-valued-metadata">
<h3>Free text-valued metadata<a class="headerlink" href="#free-text-valued-metadata" title="Permalink to this headline">¶</a></h3>
<p>ex. vaccination__adjuvants</p>
<p>Some metadata attributes could not be described by existing ontologies. While Alexandria will not support direct cross-study query of this metadata, it will be useful for users to include metadata in these structured columns so these attributes can be easily compared in query results.</p>
</div>
</div>
<div class="section" id="metadata-with-complex-dependencies">
<h2>Metadata with complex dependencies<a class="headerlink" href="#metadata-with-complex-dependencies" title="Permalink to this headline">¶</a></h2>
<p>Some metadata concepts cannot be fully described as a single field. While Alexandria does not attempt to fully capture all relevant experimental details that one would expect to find in the methods section of a paper, some values are relevant enough for query and further analysis that they are included in this convention.</p>
<div class="section" id="dependent-metadata">
<h3>Dependent metadata<a class="headerlink" href="#dependent-metadata" title="Permalink to this headline">¶</a></h3>
<p>Metadata attributes that are only relevant under specific conditions which depend on other metadata values are also specified in this ontology. For example, the <code class="docutils literal notranslate"><span class="pre">vaccination__time_since</span></code> attribute is only relevant in the context of the <code class="docutils literal notranslate"><span class="pre">vaccination</span></code> attribute. The AMC spreadsheet describes these dependencies through the <code class="docutils literal notranslate"><span class="pre">dependency</span></code> column which includes the name of the attribute that a given row depends on, the <code class="docutils literal notranslate"><span class="pre">dependency_condition</span></code> column which describes, if applicable, the specific condition that must be met for the metadata attribute to be included, the <code class="docutils literal notranslate"><span class="pre">dependent</span></code> column which includes any attributes which directly depend on the attribute in that row, and the <code class="docutils literal notranslate"><span class="pre">dependency_type</span></code> column which deliminates if the dependant attribute is allowed if the dependency is included (“if”) or if the dependant attribute is required if the dependency is included (“required_if”).</p>
<p>The specifics of each dependency are described in the AMC spreadsheet under the <code class="docutils literal notranslate"><span class="pre">attribute_description</span></code> column.</p>
</div>
<div class="section" id="array-valued-metadata">
<h3>Array valued metadata<a class="headerlink" href="#array-valued-metadata" title="Permalink to this headline">¶</a></h3>
<p>ex. disease, vaccinations</p>
<p>For several attributes, it does not make semantic sense to only allow one value for each metadata row. While we expect that in most controlled studies, these values will contain a single entry, we chose to allow multiple values for studies investigating combinitorial effects. Even if one of the values is not of specific interest to the study, please include it if possible. Ex. a study about flu vaccines would include the flu vaccine as a value for the vaccination attribute, but if the clinical data about other vaccines is also available, these vaccinations should be included as well.</p>
<p><strong>Syntax in metadata file:</strong> Array-valued metadata should be formatted as follows: <code class="docutils literal notranslate"><span class="pre">[&quot;value1&quot;&quot;value2&quot;&quot;value3&quot;]</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;value1&quot;&quot;value2&quot;&quot;value3&quot;</span></code>. If the array-valued metadata only contains a single value it should still follow the same format: ex <code class="docutils literal notranslate"><span class="pre">&quot;value1&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">[&quot;value1&quot;]</span></code>.</p>
<p>If the array-valued metadata attribute is a dependant metadata attribute, the order in the array should correspond with the order of the array the attribute depends on. For example, the following metadata entries for <code class="docutils literal notranslate"><span class="pre">vaccination__ontology_label</span></code>: <code class="docutils literal notranslate"><span class="pre">&quot;Influenza</span> <span class="pre">Virus</span> <span class="pre">Vaccine&quot;&quot;BCG</span> <span class="pre">Vaccine&quot;</span></code>, for <code class="docutils literal notranslate"><span class="pre">vaccination__time_since</span></code> : <code class="docutils literal notranslate"><span class="pre">&quot;1&quot;,&quot;2&quot;</span></code>, and for <code class="docutils literal notranslate"><span class="pre">vaccination__time_since__unit_label</span></code>: <code class="docutils literal notranslate"><span class="pre">&quot;year&quot;,&quot;year&quot;</span></code> would indicate that the Influenza vaccine was recieved 1 year ago and the BCG Vaccine was recieved 2 years ago.  If information is not available for one of the metadata entries in a dependant array, include an empty string(<code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>) for that value.</p>
<p>The AMC spreadsheet can be used as a guide in writing an Alexandria metadata file but includes more information than is necessary for this process.</p>
<p>See the below table for descriptions of columns in this spreadsheet that are useful in building this file: w</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="left"><strong>Column</strong></th>
<th align="left"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">attribute</td>
<td align="left">Serve as valid metadata column headers in the <a href="dropseq_cumulus.html#the-input-csv-file">input_csv_file</a> for dropseq_scCloud tool or the cell-level metadata file. Spaces between words are denoted by a single '_' while subattributes are denoted with a double '_' between the attribute parent and the attribute child.</td>
</tr>
<tr>
<td align="left">required</td>
<td align="left">Whether the attribute <strong>MUST</strong> be included as a column in the metadata file of the data you are uploading to Alexandria.</td>
</tr>
<tr>
<td align="left">default</td>
<td align="left">The default value which you should include in the metadata file for a required value if it does not apply to your data. <em>There is currently no system to automatically fill this data.</em></td>
</tr>
<tr>
<td align="left">type</td>
<td align="left">The datatype of the attribute that Alexandria expects. <code>strings</code> can be text without quotation marks  <code>booleans</code> can be either <code>True</code> or <code>False</code>. <code>numbers</code> are any numeric character, e.g. 0, 1, 2, ...</td>
</tr>
<tr>
<td align="left">array</td>
<td align="left">TRUE if the metadata is an array-valued metadata type.</td>
</tr>
<tr>
<td align="left">class</td>
<td align="left">The class of a string-type metadata attribute. <ul><li><strong>[blank]</strong>: no class, ontology: this attribute should be an ontology ID.</li><li><strong>ontology_label</strong>: This attribute should be the human-readable label corresponding to it's ontology ID.</li><li><strong>enum</strong>: a value from a controlled list.</li><li><strong>unit_label</strong>: the name of the unit, either a free-text string or the ontology label from the unit ontology</li></ul></td>
</tr>
<tr>
<td align="left">ontology</td>
<td align="left">A URL to the ontology entry on the European Bioinformatics Insitute domain.</td>
</tr>
<tr>
<td align="left">ontology_root</td>
<td align="left">The highest value in the ontology tree applicable to this metadata attribute</td>
</tr>
<tr>
<td align="left">controlled_list_entries</td>
<td align="left">For attributes of class enum, the value is expected to be one value from the list of entries displayed here.</td>
</tr>
<tr>
<td align="left">dependency</td>
<td align="left">The parent ontology that the attribute is dependent upon.</td>
</tr>
<tr>
<td align="left">dependency_condition</td>
<td align="left">The condition on the dependency under which the attribute is dependant</td>
</tr>
<tr>
<td align="left">dependent</td>
<td align="left">The attribute that is dependent upon this attribute.</td>
</tr>
<tr>
<td align="left">attribute_description</td>
<td align="left">A description of what the attribute is.</td>
</tr>
</tbody>
</table></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="alexandria.html" class="btn btn-neutral float-right" title="Running on Alexandria" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="introduction.html" class="btn btn-neutral float-left" title="The Alexandria Project" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Shalek Lab

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>